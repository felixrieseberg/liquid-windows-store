define("oneStore.uriBuilder",[],function(){function n(n,t,i){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),u=n.indexOf("?")!==-1?"&":"?";return n.match(r)?n.replace(r,"$1"+t+"="+i+"$2"):n+u+t+"="+i}function t(n,t){var r=new RegExp("[?&]"+t+"=([^&]*)","i"),i=n.match(r);return i&&i.length>1?i[1]:null}function i(n,t){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=n.match(i);return r?r.length>2&&r[2]==="&"?n.replace(i,"$1"):n.replace(i,""):n}return{addOrUpdateQueryParameter:n,getValueOfQueryParameter:t,removeQueryParameter:i}});define("javascriptExtensions",[],function(){function n(n){return typeof n=="function"}n(Array.prototype.forEach)||(Array.prototype.forEach=function(n,t){for(var r=this.length,i=0;i<r;i++)i in this&&n.call(t,this[i],i,this)});n(Array.prototype.map)||(Array.prototype.map=function(n,t){for(var u=this.length,r=[],i=0;i<u;i++)i in this&&(r[i]=n.call(t,this[i]));return r});Array.prototype.filter||(Array.prototype.filter=function(n){var f=this.length,i,u,t,r;if(typeof n!="function")throw new TypeError;for(i=[],u=arguments[1],t=0;t<f;t++)t in this&&(r=this[t],n.call(u,r,t,this)&&i.push(r));return i});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1})});require(["javascriptExtensions"],function(){});define("oneStore.userAgent",["window"],function(n){function t(){if(!n.navigator.userAgent)return!1;var t=n.navigator.userAgent.toLowerCase();return t.indexOf("windows nt 6.4")>=0||t.indexOf("windows nt 10")>=0||t.indexOf("windows phone 10")>=0}function i(){if(!n.navigator.userAgent)return!1;var i=n.navigator.userAgent.toLowerCase();return(i.indexOf("windows nt 6.3")>=0||i.indexOf("windows nt 6.2")>=0||i.indexOf("windows nt 8")>=0||i.indexOf("windows phone 8")>=0)&&!t()}function r(){if(!n.navigator.userAgent)return!1;var t=n.navigator.userAgent.toLowerCase();return t.indexOf("windows")>=0}return{isFromThresholdDevice:t,isFromWin8XDevice:i,isFromWindowsDevice:r}});define("oneStore.prune",["document","oneStore.userAgent"],function(n,t){function r(n,r,u,f){var e=[n,r,u,f];t.isFromThresholdDevice()?(e.splice(3,1),e.forEach(i)):t.isFromWin8XDevice()?(e.splice(2,1),e.forEach(i)):t.isFromWindowsDevice()?(e.splice(1,1),e.forEach(i)):(e.splice(0,1),e.forEach(i))}function i(n){n&&n.remove()}return{pruneByUserAgent:r,prune:i}});define("oneStore.page",["oneStore.uriBuilder","window","jquery"],function(n,t){var i="data-skip-items",r="skipItems",u=function(t){$(t).find(".cli_pageLink").each(function(t,u){var e=$(u);e.attr("href",n.addOrUpdateQueryParameter(f(),r,e.attr(i)))})},f=function(){return n.addOrUpdateQueryParameter(t.location.href,"s","store")};return{start:u}});define("oneStore.rank",["oneStore.uriBuilder","window","jquery"],function(n,t){var i="rank",r=function(r){function f(r){var u=n.addOrUpdateQueryParameter(t.location.href,i,r);t.location.href=n.removeQueryParameter(u,"skipItems")}var u=n.getValueOfQueryParameter(t.location.href,i);u!==null&&u!==undefined&&u!==""&&r.val(u);r.change(function(n){f(n.target.value)})};return{start:r}});define("oneStore.scopeSwitcher",["oneStore.uriBuilder","window"],function(n,t){var i=function(n){$(n).find("select").change(function(n){t.open(n.target.value,"_top")});$(n).find("li").on("click",function(n){t.open($(n.target).data("href"),"_top")})};return{start:i}});define("oneStore.redirect",["clickstreamTracker","document","ids","oneStore.userAgent","window"],function(n,t,i,r,u){function f(n){return(n||o(t.referrer))&&r.isFromThresholdDevice()}function o(n){return!n||n.indexOf("microsoft.com")<0}var e=function(t,r,e){var o=t.data("target"),s,h,c;f(e)&&r&&(s=i.getImpressionGuid(),o+="&webig="+s,h={name:"AutoRedirectToNativeStorePDP",targetUri:o,contentId:r,contentSource:"DisplayCatalog"},c={productId:r},n.captureContentPageAction(h,c),u.location.href=o)};return{autoRedirectToNativeStorePdp:e,shouldRedirectToNativeStore:f}});define("oneStore.search",["window","jquery","clickstreamTracker"],function(n,t,i){var u="query",f="scope",r="ms.searchscope",e=function(e,o){function l(){o&&s.val().length>0&&(n.location.href=o+"?"+u+"="+s.val()+"&"+f+"="+a())}function a(){return c.find("input:checked").val()||"store"}function v(n){e.find(n.target).length<1&&y()}function y(){h&&(t(document).unbind("click",v),c.hide(),h=!1)}function p(){h||(t(document).bind("click",v),c.css("top",e.height()).css("marginLeft",s.css("marginLeft")).outerWidth(s.outerWidth()).show(),h=!0)}var h=!1,s=e.find(".search-text"),c=e.find(".search-scope-elements");e.keypress(function(n){n.keyCode===13&&(l(),i.capturePageAction(n.currentTarget))});e.attr(r,a());s.focus(function(){p()});e.find(".btn-sm").click(function(n){l();i.capturePageAction(n.currentTarget)});c.find("input").click(function(n){e.attr(r,n.target.value)})};return{start:e}});define("oneStore.category",["oneStore.uriBuilder","window","jquery"],function(n,t,i){function f(i,u){for(var f=t.location.href,o,e=0;e<r.length;e++)if(i.toLowerCase()===r[e].toLowerCase())for(o=e;o<r.length;o++)f=n.removeQueryParameter(f,r[o]);u!=="all"&&(f=n.addOrUpdateQueryParameter(f,i,u));f=n.removeQueryParameter(f,"skipItems");t.location.href=f}var r=["cat0","cat1","cat2"],u=function(u,e){e.each(function(n,t){i(t).click(function(){i(this).find(".glyphicon").fadeOut(100,function(){i(this).toggleClass("glyphicon-plus glyphicon-minus").fadeIn(100)});i(t).siblings(".radioGroup").toggle();i(this).closest("ul").parents("ul").find(".nav-group li").toggleClass(function(){return i(this).is(".expanded")?"collapsed":"expanded"})})});r.forEach(function(r){var f=n.getValueOfQueryParameter(t.location.href,r),o=(f?f:"All").toLowerCase(),e=u.filter("[name='"+r+"'][value='"+o+"']");e.length&&i(e).each(function(){i(this).prop("checked",!0)})});u.change(function(n){f(n.target.name,n.target.value)})},e=function(u){u.each(function(u,f){for(var h=i(f).data("name"),c=i(f).data("value"),e=t.location.href,s,o=0;o<r.length;o++)if(h.toLowerCase()===r[o].toLowerCase())for(s=o;s<r.length;s++)e=n.removeQueryParameter(e,r[s]);c!=="all"&&(e=n.addOrUpdateQueryParameter(e,h,c));e=n.removeQueryParameter(e,"skipItems");e=n.removeQueryParameter(e,"rank");f.href=e})};return{start:u,startOneUi:e}});define("oneStore.collapseButton",["jquery"],function(n){function t(t){t.click(function(){var r=t.data("alternate-text"),i;t.data("alternate-text",t.text());t.text(r);i=t.data("target");n(i).toggle()})}return{initialize:t}});require(["oneStore.collapseButton","jquery"],function(n,t){t().ready(function(){n.initialize(t(".cli_collapseButton"))})});define("oneStore.refine",["oneStore.category","oneStore.uriBuilder"],function(n,t){var i=function(t,i){t.on("click",function(){i.siblings().toggleClass("notOnPage");i.parents().siblings().toggleClass("notOnPage");t.toggleClass("onlyThingOnPage");i.toggleClass("onlyThingOnPage");$(".close-refiner").toggleClass("onlyThingOnPage");n.start($(".categoryRadio"),$(".categoryTitle"))})},r=function(n,t){n.on("click",function(){t.click()})},u=function(n,t){n.on("click",function(){t.click()})},f=function(n,i){var u=i.split(","),r=window.location.href;u.forEach(function(n){r=t.removeQueryParameter(r,n)});n.attr("href",r)},e=function(n){var i=n.xsRefineControl,r=n.refineListTitle,t=n.xsRefineAction,u=n.searchResultsControl,f=n.xsRefineClose;$([t,f].join()).on("click",function(){return $([i,u].join()).toggleClass("hidden"),!1});$(t).text(r)};return{start:i,end:r,clear:u,clearOneUi:f,initRefineXsOneUi:e}});define("oneStore.ellipses",["jquery"],function(n){var t=function(t){t.each(function(t,i){for(var r=n(i),e=parseInt(r.css("line-height"),10)*2,f="",u=r.text();f!==u&&r.outerHeight()>e;)f=u,r.text(function(n,t){return t.replace(/\W*\s(\S)*$/,"...")}),u=r.text()})};return{start:t}});define("oneStore.images",["jquery"],function(n){var t=function(t,i){t.each(function(t,r){n(r).on("error",function(){r.src=i});(r.complete&&r.width===0||r.src==="")&&(r.src=i);n(r).removeClass("cli_needsDefaultImage")})},i=function(){};return{changeImagesIfFailed:t,chooseBestImage:i}});define("oneStore.unifiedChannel",["jquery","knockout","service","oneStore.slick","oneStore.uriBuilder","clickstreamTracker","cookie"],function(n,t,i,r,u,f,e){function s(){n(function(){n(".cli_unifiedChannel").each(function(t,i){o("unifiedChannel"+t,n(i))})})}function o(o,s){var h,l,v,c,p,a,y,w;(s.attr("id",o),h=s.data("service-url"),h)&&(l={items:t.observableArray(),columnSize:t.observable(3)},l.columns=t.computed(function(){for(var i=[],n=[],u=this.columnSize(),t=0,r=this.items().length;t<r;t++)t%u==0&&(i.push(n),n=[]),n.push(this.items()[t]);return n!==[]&&i.push(n),i},l),v=s.data("authuseronly"),(v!=="True"||v==="True"&&e.getCookie("StoreMsaUser"))&&(c=s.find(".media-img").first(),c.length!==0&&(p=c.width(),a=1,c.closest(".ratio-2-1").length?a=2:(c.closest(".ratio-1-1").length||c.closest(".ratio-movie").length)&&(a=1),h=u.addOrUpdateQueryParameter(h,"desiredImageWidth",p),h=u.addOrUpdateQueryParameter(h,"desiredImageAspectRatio",a)),y=s.data("version"),w={contractVersion:y,currentOperationName:"Load Channel "+s.data("operation"),operationName:s.data("operation"),serviceName:s.data("service"),version:y,url:h,contentType:"application/json"},i.get(w).then(function(i){i&&i.Items&&(n.each(i.Items,function(n,t){t.index=n+1;l.items.push(t)}),f.capturePartialView(o));var u=s.find(".section-carousel");t.applyBindings(l,s.get(0));u.length&&(s.replaceWith(s.children()),r.loadOne(u))})))}return{setup:s,startLoad:o}});require(["oneStore.unifiedChannel"],function(n){n.setup()});define("flighting.config",["ids"],function(n){function i(){var i=t(),n={};return i.indexOf("helloworld:test")>-1&&(n.clientFlightDetect1="clientFlightDetect2"),i.indexOf("legacyordervalidation:1")>-1&&(n.orderValidator="orderValidatorLegacy"),i.indexOf("Task807154:1")===-1&&(n.allowedPiFilter="allowedPiFilter_DisabledFeature"),i.indexOf("usepidl:1")>-1&&(n.Router="RouterWithPaymentAndBilling",n["settings.noPaymentInstruments"]="settings.noPaymentInstrumentsV2"),i.indexOf("cannotbuyfree:1")>-1&&(n.isPiRequiredForOrderV2="isPiRequiredForOrder"),i.indexOf("showaddaddress:1")>-1&&(n.showAddAddress="showAddAddressReady"),i.indexOf("noCacheOrders:1")===-1&&(n["blendService.request"]="blendService.requestV2",n.getServiceCallHeaders="getServiceCallHeadersV2",n.Order="OrderV2",n.orderAdapter="orderAdapterCachedOrder",n.orderResultHandler="orderResultHandlerCachedOrder",n.PurchaseConfirmRoute="PurchaseConfirmRouteCachedOrder",n.PurchaseConfirmController="PurchaseConfirmControllerCachedOrder"),n}function t(){var t=n.getFlights();return t&&t.split(",")||[]}return{getFlightMap:i,getFlights:t}});define("flighting.mapper",["flighting.config"],function(n){var t=n&&n.getFlightMap();t&&require.config({map:{"*":t}})});require(["flighting.mapper"],function(){});define("storePageName",["jquery"],function(n){return function(){var t=n("meta[name='ms.pagename']").attr("content");return t||(t="Unknown"),t}});require.config({map:{clickstreamTracker:{pageName:"storePageName"}}});require(["clickstreamTracker","cookie","oneStore.uriBuilder","document"],function(n,t,i,r){var f,u,e;n.setAppId("UniStore");f=t.getCookie("StoreMsaUser")||t.getCookie("StoreAadUser");n.setSignInStatus(f?!0:!1);r.referrer&&r.referrer.indexOf("https://login.live")===0&&(u=i.getValueOfQueryParameter(r.referrer,"arurl"),u!==null&&(e=decodeURIComponent(u),n.setReferrer(e)));n.init()});define("oneStore.entitlements",["document","jquery","service"],function(n,t,i){function e(){t.each(t(".entitlements"),function(n,i){var r=t(i),u=r.data("locale"),f=r.data("market"),e=r.data("product-id"),s=r.data("item-type");o(u,f,e,s)})}function o(e,o,s,h){var l=(h+"$"+s).toLowerCase(),c=u.replace("{0}",e.toLowerCase()),a;(c+="?market="+o.toLowerCase(),c+="&pageSize="+f,c+="&productId="+window.encodeURIComponent(s.toLowerCase()),c+="&itemType="+window.encodeURIComponent(h.toLowerCase()),r.hasOwnProperty(l))||(r[l]=c,a={currentOperationName:"GetProductEntitlements",operationName:"ProductEntitlements",serviceName:"Entitlements",url:c,contentType:"application/json"},i.get(a).then(function(i){var r=null;i&&i.Items&&i.Items.length>0&&(r=i.Items[0]);t(n).trigger("entitlementLoaded",r)}))}var u="/{0}/store/webapi/productEntitlements",f=100,r=[];return{initialize:e}});require(["oneStore.entitlements","oneStore.storeShell","jquery"],function(n,t,i){i().ready(function(){t.isUserSignedIn()&&n.initialize()})});require(["document","jquery"],function(n,t){t(n).on("entitlementLoaded",function(n,i){i&&t(".requiresEntitlement").toggleClass("hidden")})});define("oneStore.reviews",["jquery","knockout","service","clickstreamTracker"],function(n,t,i,r){function v(){var i,r,l;n(".cli_reviews").length!==0&&n("#reviewsPagingSection").length!==0&&(i=n("#reviewsPagingSection"),f=parseInt(i.data("page-size")),o=parseInt(i.data("max-items")),s=i.data("service-url"),h=i.data("item-range-description-format"),t.applyBindings(e,n(".cli_reviews").get(0)),c(),r=n("#reviewsPageNext"),r.click(function(){if(r.prop("disabled"))return!1;u=u+f;a(s,u,f)}),l=n("#reviewsPagePrevious"),l.click(function(){if(l.prop("disabled"))return!1;u=u>=f?u-f:0;a(s,u,f)}))}function c(){l(n("#reviewsPagePrevious"),u>0);l(n("#reviewsPageNext"),u+f<o)}function l(n,t){t?(n.prop("disabled",!1),n.removeClass("disabled"),n.attr("href","#ReviewsTop")):(n.prop("disabled",!0),n.addClass("disabled"),n.removeAttr("href"))}function y(){var t=h;t=t.replace("{startingIndex}",u+1);t=t.replace("{endingIndex}",u+e.items().length);t=t.replace("{maxItems}",o);n(".itemRangeDescription").text(t)}function a(t,u,f){var o=t+"&skipItems="+u,s;o+="&pageSize="+f;s={currentOperationName:"GetMoreReviews",operationName:"Reviews",serviceName:"RatingsReviews",url:o,contentType:"application/json"};i.get(s).then(function(t){t&&t.Items&&(e.items.removeAll(),n.each(t.Items,function(n,t){t.index=n+1;e.items.push(t)}),n(".srv_reviews").hide(),n(".cli_reviews").show(),c(),y(),r.capturePartialView("Reviews"))})}var u=0,f=0,o=0,s="",h="",e={items:t.observableArray([])};return{initialize:v}});require(["oneStore.reviews","jquery"],function(n,t){t().ready(function(){n.initialize()})});define("oneStore.Handlebars.helpers",["Handlebars"],function(n){function t(){n.registerHelper("last",s);n.registerHelper("when",u);n.registerHelper("whenAny",f);n.registerHelper("ifCond",i);n.registerHelper("ifAll",e);n.registerHelper("unlessAll",o);n.registerHelper("stringEqual",r);n.registerHelper("plusOne",h)}function c(i,r){t();var u=n.templates[i];return u||l("cannot find handlebars template: "+i),u(r).replace(/\ufeff/,"")}function l(n){typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(n)}var i=function(n,t,i,r){switch(t){case"==":return n==i?r.fn(this):r.inverse(this);case"===":return n===i?r.fn(this):r.inverse(this);case"<":return n<i?r.fn(this):r.inverse(this);case"<=":return n<=i?r.fn(this):r.inverse(this);case">":return n>i?r.fn(this):r.inverse(this);case">=":return n>=i?r.fn(this):r.inverse(this);case"&&":return n&&i?r.fn(this):r.inverse(this);case"||":return n||i?r.fn(this):r.inverse(this);default:return r.inverse(this)}},r=function(n,t,i){return n.toUpperCase()===t.toUpperCase()?i.fn(this):i.inverse(this)},u=function(n,t,i){return n===t?i.fn(this):i.inverse(this)},f=function(){for(var t=[].slice.apply(arguments),i=t.pop(),u=t[0],r=t.slice(1),n=0;n<r.length;n++)if(u===r[n])return i.fn(this);return i.inverse(this)},e=function(){for(var t=[].slice.apply(arguments),i=t.pop(),r=i.fn,n=0;n<t.length;++n)if(!t[n]){r=i.inverse;break}return r(this)},o=function(){for(var t=[].slice.apply(arguments),i=t.pop(),r=i.fn,n=0;n<t.length;++n)if(t[n]){r=i.inverse;break}return r(this)},s=function(n,t,i){var r=parseInt(n),u=parseInt(t);return(r+1)%u==0?i.fn(this):i.inverse(this)},h=function(n){return n+1};return{register:t,generateHtml:c}});require(["oneStore.Handlebars.helpers"],function(n){n.register()});define("oneStore.storeShell",["jquery","cookie","service","clickstreamTracker","vortexEvents"],function(n,t,i,r,u){function f(){return t.getCookie("StoreMsaUser")||t.getCookie("StoreAadUser")}function e(){n(function(){var n=window.msCommonShell,t;f()&&(t={currentOperationName:"GetUserDetails",operationName:"getuserjson",serviceName:"FrontDoor",url:"/store/user/getuserjson",version:"1",contentType:"application/json"},i.get(t).then(function(t){var i;t!=undefined&&(t.AuthenticationType==="Windows Live ID"?(i={idp:n.SupportedAuthIdp.MSA,firstName:t.FirstName,lastName:t.LastName,memberName:t.Name,cid:t.PassportCid,authenticatedState:n.AuthState.SignedIn},n.updateUserData(i)):t.AuthenticationType==="AAD"&&(i={idp:n.SupportedAuthIdp.AAD,firstName:t.FirstName,lastName:t.LastName,memberName:t.EmailAddress,cid:t.OrganizationId,authenticatedState:n.AuthState.SignedIn},n.updateUserData(i)))}))})}function o(t,i){var r={AS:function(n){return{title:n.Txt}},QuickProduct:function(n){return{title:n.Title,image:n.ImageUrl,target:n.Url}}};return{searchSuggestCallback:function(u){var f={query:u.text,clientId:"7F27B536-CF6B-4C65-8638-A0F8CBDFCA65",scope:"Microsoft",market:i,source:"store",productCount:3};n.ajax({type:"GET",dataType:"json",url:t+"?"+n.param(f),success:function(t){u.response({suggestions:n.map(t.AS.Results,function(n){return n.Suggests.map(r[n.Type])})})}})}}}function s(t){var i={events:{onEventLog:function(n,t){var i,f;n.indexOf("MeControl_")>=0&&t.type&&(t.type==="qos"&&t.success==="0"&&(i={currentOperationName:n,isSuccess:!1,latencyMs:t.duration,errorMessage:t.errorCode+(t.IDPError?":"+t.IDPError:""),requestUri:t.targetUri,serviceName:"MeControl",operationName:n},u.sendApiComplete(i)),t.type=="bici"&&n.indexOf("Ready")<0&&(f={name:n,contentId:n,areaName:"MeControl",targetUri:t.targetUri},r.captureContentPageAction(f)))},onSearch:function(t){var i=t.q.value,u=t.form.value,f={name:"Search",targetUri:t.action+"?"+n(t).serialize()},e={searchTerm:i,searchScope:u};r.captureContentPageAction(f,e)}}},f;t&&(f=o(t.requestEndpoint,t.locale),i=n.extend(!0,{},i,f));window.msCommonShell.load(i)}return{getUserInfo:e,isUserSignedIn:f,initShell:s}});define("oneStore.slick",["jquery"],function(n){function r(){n(".section-carousel").not(".unifiedChannel .section-carousel").each(function(t,r){i(n(r))})}function i(n){n.hasClass("spotlight")?n.slick({dots:!0,draggable:!0,infinite:!0,slide:".slide",appendDots:n.next(".spotlight-dots")}):n.hasClass("carousel-8")?n.slick({infinite:!1,speed:800,slide:".slide",slidesToShow:8,slidesToScroll:8,appendArrows:n.closest(".section").find(".section-header-arrows"),responsive:[{breakpoint:t.vp4,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:t.vp3,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:t.vp2,settings:{slidesToShow:3,slidesToScroll:3,arrows:!1,dots:!0}},{breakpoint:t.vp1+60,settings:{slidesToShow:2,slidesToScroll:2,arrows:!1,dots:!0}}]}):n.hasClass("carousel-6")?n.slick({infinite:!1,speed:800,slide:".slide",slidesToShow:6,slidesToScroll:6,appendArrows:n.closest(".section").find(".section-header-arrows"),responsive:[{breakpoint:t.vp4,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:t.vp2,settings:{slidesToShow:3,slidesToScroll:3,arrows:!1,dots:!0}},{breakpoint:t.vp1+60,settings:{slidesToShow:2,slidesToScroll:2,arrows:!1,dots:!0}}]}):n.hasClass("carousel-5")?n.slick({infinite:!1,speed:800,slide:".slide",slidesToShow:5,slidesToScroll:5,appendArrows:n.closest(".section").find(".section-header-arrows"),responsive:[{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}}]}):n.hasClass("carousel-4")&&n.slick({infinite:!1,speed:800,slide:".slide",slidesToShow:4,slidesToScroll:4,appendArrows:n.closest(".section").find(".section-header-arrows"),responsive:[{breakpoint:t.vp4,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:t.vp3,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:t.vp2,settings:{slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0}}]})}var t={vp1:320,vp2:540,vp3:768,vp4:992,vp5:1400};return{loadAll:r,loadOne:i}});require(["oneStore.slick"],function(n){n.loadAll()})